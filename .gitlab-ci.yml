image: alpine:latest

pages:
  stage: deploy
  environment: production
  script:
    - wget https://github.com/quarto-dev/quarto-cli/releases/download/v1.4.550/quarto-1.4.550-linux-amd64.tar.gz
    - mkdir ~/opt
    - tar -C ~/opt -xvzf quarto-1.4.550-linux-amd64.tar.gz
    - mkdir ~/bin
    - ln -s ~/opt/quarto-1.4.550/bin/quarto ~/bin/quarto
    - ( echo ""; echo 'export PATH=$PATH:~/bin\n' ; echo "" ) >> ~/.profile
    - source ~/.profile
    - quarto render project
  artifacts:
    paths:
      - public
  only:
      - main

